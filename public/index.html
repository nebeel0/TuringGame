<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="">
<meta name="author" content="">
<link href="/stylesheets/style.css" rel="stylesheet" type="text/css"/>

<title>The Turing Test Game</title>
<!-- <title>Simple game</title> -->
</head>
<body>
  <div class="mainContent">
    <p>
      <h1>The Turing Test Game</h1>
    </p>
   
   
      
  <div id="output" ></div>
    <div class="askContent">
      <input type="text" id="question" class="textbox" value="Username"/>
      <input type="button" class="askButton" value="ENTER" onclick="enter()"/>
    </div>
  </div>

 
<script src="jquery/jquery-3.1.1.min.js"></script>
<script>
  // Set focus to the question box
  document.getElementById("question").focus();

  // Pressing Enter in the question box will redirect page
  $("#question").keyup(function(event){
    if(event.keyCode == 13){
      enter();
    }
  });

  // Displays a formatted question or answer to the page
  function showOutput(classType, output){
	  var elementSeparator = document.createElement('div');
      elementSeparator.setAttribute('class',classType);
      elementSeparator.innerHTML = output;                		
      document.getElementById('output').appendChild(elementSeparator);
      
      var elementSeparator = document.createElement('div');
      elementSeparator.setAttribute('class','messageSeparator');
      elementSeparator.innerHTML = '&nbsp;'
      document.getElementById('output').appendChild(elementSeparator);      
  }
  
  // Posts a question to the url: /question and process the answer
  function enter() { 
	  
    /* var myQuestion = document.getElementById('question').value; 
	 
    var questionEntity = {
      'question' : myQuestion
    };
	
    showOutput('questionContent', myQuestion);
    $('html, body').animate({ scrollTop: $(document).height() }, 'slow');
    	
    document.getElementById('question').value = '';
      
    $.ajax({
      type : 'POST',
      data : questionEntity,
      dataType : 'json',
      url : '/question',
      success : function(r, msg) {
        if (r.answer !== undefined) {
          showOutput('answerContent', r.answer); 
          document.getElementById('question').focus();		
		
          $('html, body').animate({ scrollTop: $(document).height() }, 'slow');

        } else {
        	console.log('The response back was undefined');
        	showOutput('answerContent', 'Sorry, I have no response to your question.');
        }
        },
          error : function(r, msg, e) {            
            var errorText = '';
            if (r.responseText) {
              errorText = e + ' ' + r.responseText;
            } else {
              errorText = e;
            }            	
			console.log(errorText);
			showOutput('answerContent', 'Sorry, I am unable to respond to your question.');
          }
    });	 */
    var express = require('express')
  , http = require('http')
  , path = require('path');
    
    var app = express();
	
	// all environments
	app.set('port', process.env.PORT || 3000);
	app.use(express.favicon());
	app.use(express.logger('dev'));
	app.use(express.bodyParser());
	app.use(express.methodOverride());
	app.use(app.router);
	app.use(express.static(path.join(__dirname+'/../', 'public_chatService')));
	
	app.use("/", express.static(__dirname + '+/../public_chatService'));

	// Simple AI Type
	var simpleAI = require('./simpleAI/simpleAI');
	app.post('/question', simpleAI.question);
	
	http.createServer(app).listen(app.get('port'), function(){
	  console.log('Express server listening on port ' + app.get('port'));
	});
		
  }
</script>
</body>
</html>
